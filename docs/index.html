<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.7.1" />
<title>tiresias API documentation</title>
<meta name="description" content="The `Tiresias` platform is a differentially private data marketplace which
helps connect users and researchers, enabling them to collaboratively â€¦" />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{font-weight:bold}#index h4 + ul{margin-bottom:.6em}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>tiresias</code></h1>
</header>
<section id="section-intro">
<p>The <code>Tiresias</code> platform is a differentially private data marketplace which
helps connect users and researchers, enabling them to collaboratively assemble
diverse datasets and develop novel machine learning methods and applications.</p>
<p>To install the <a title="tiresias" href="#tiresias"><code>tiresias</code></a> library in development mode, run the following:</p>
<pre><code>git clone &lt;http://github.com/DAI-Lab/p2p-data&gt;
pip install -e .
pytest
</code></pre>
<h2 id="usage">Usage</h2>
<p>In actual usage scenarios, you should primarily interact with the <a title="tiresias" href="#tiresias"><code>tiresias</code></a>
platform through the <code>tiresias-server</code> and <code>tiresias-client</code> binaries. For a
typical deployment, you'll want to launch <code>tiresias-server</code> on a remote machine
and ask each user to install the <code>tiresias-client</code> and point it at the server.</p>
<pre><code>server$ tiresias-server --port 3000
user1$ tiresias-client --server &lt;http://server:3000/&gt;
user2$ tiresias-client --server &lt;http://server:3000/&gt;
user3$ tiresias-client --server &lt;http://server:3000/&gt;
</code></pre>
<h3 id="data-collection">Data Collection</h3>
<p>The users can then install data collection applications which will interact
locally with the client and insert rows into their personal data store. For
example, suppose we wrote a data collection application which collects
information about CPU usage:</p>
<pre><code>from time import sleep
import tiresias.client.api as api

api.register_app(8000, &quot;device_info&quot;, {
    &quot;cpu_usage&quot;: {
        &quot;description&quot;: &quot;Real time CPU usage statistics.&quot;,
        &quot;columns&quot;: {
            &quot;percent_used&quot;: {
                &quot;type&quot;: &quot;float&quot;, 
                &quot;description&quot;: &quot;What percent of CPU is used?&quot;
            },
            &quot;number_of_cores&quot;: {
                &quot;type&quot;: &quot;float&quot;, 
                &quot;description&quot;: &quot;How many logical cores are there?&quot;
            }
        }
    }
})

while True:
    api.insert_payload(8000, &quot;device_info&quot;, {
        &quot;cpu_usage&quot;: [{
            &quot;percent_used&quot;: get_cpu_usage(),
            &quot;number_of_cores&quot;: get_num_cores(),
        }]
    })
    sleep(1)
</code></pre>
<p>If every user runs the above application, then each of their personal data
stores would begin to populate with information about their CPU usage history.
Note that at this point, no one has access to a user's personal data store
except for the user's themselves.</p>
<h3 id="example-query">Example Query</h3>
<p>If the user wants to contribute their data to a query, then they can check
with the server and see if there are any pending queries. For example, suppose
a researcher wanted to estimate the average CPU usage in a differentially
private manner. They could submit the following query to the server, allowing
users to see it and potentially contribute their data:</p>
<pre><code>import tiresias.server.api as api

query_id = api.create_query(&quot;http://&lt;server_ip&gt;:3000/&quot;, {
    &quot;type&quot;: &quot;basic&quot;,
    &quot;epsilon&quot;: 1.0,
    &quot;featurizer&quot;: &quot;SELECT avg(percent_used) FROM device_info.cpu_usage&quot;,
    &quot;aggregator&quot;: &quot;mean&quot;
})
</code></pre>
<p>The SQL-based <code>featurizer</code> field provides a rich syntax for expressing
complicated relationships (e.g. joining data from multiple applications -
for example, examining the relationship between CPU usage and browsing
history), providing numerous dimensions to explore. In this example, however,
we're simply computing the average CPU usage for this specific user and
using that as the feature.</p>
<p>After giving the users some time to review the query and contribute their
data, the researcher can then check on the status of the query:</p>
<pre><code>query = api.fetch_query(&quot;http://localhost:3000/&quot;, query_id)
print(&quot;The average CPU usage was: %s&quot; % query[&quot;result&quot;])
</code></pre>
<p>This will return a value that is differentially private with respect to
each individual user who chose to contribute their data to the query. Note
that this is only a very simple example of a query; examples of more complex
queries such as bounded queries, machine learning queries, and federated
learning queries are shown below.</p>
<h2 id="queries-and-mechanisms">Queries and Mechanisms</h2>
<p>This section describes the four primary types of queries the <code>tiresias</code>
platform supports.</p>
<h3 id="basic-queries">Basic Queries</h3>
<p>Basic queries take the below form where the featurizer is a SQL script that
returns a single scalar value and the aggregator is one of: <code>mean</code>, <code>median</code>,
<code>count</code>, or <code>sum</code>.</p>
<pre><code>query_id = api.create_query(&quot;http://&lt;server_ip&gt;:3000/&quot;, {
    &quot;type&quot;: &quot;basic&quot;,
    &quot;epsilon&quot;: 1.0,
    &quot;featurizer&quot;: &lt;SQL&gt;,
    &quot;aggregator&quot;: &lt;AGGREGATOR&gt;
})
</code></pre>
<p>This type of query returns a single value correponding to the aggregation
of all the features.</p>
<h3 id="bounded-queries">Bounded Queries</h3>
<p>Bounded queries take the below form where the featurizer is a SQL script that
returns a single row (e.g. a dictionary). In addition, bounded queries must
specify the bounds for each value in the dictionary. Bounds can be either a
<code>set</code> of values from a finite domain or a <code>range</code> of values with a finite
minimum or maximum.</p>
<pre><code>query_id = api.create_query(&quot;http://&lt;server_ip&gt;:3000/&quot;, {
    &quot;type&quot;: &quot;bounded&quot;,
    &quot;epsilon&quot;: 1.0,
    &quot;featurizer&quot;: &quot;SELECT species, age FROM profile.pets&quot;,
    &quot;bounds&quot;: {
        &quot;species&quot;: {
            &quot;type&quot;: &quot;set&quot;, 
            &quot;default&quot;: &quot;dog&quot;,
            &quot;values&quot;: [&quot;cat&quot;, &quot;dog&quot;], 
        },
        &quot;age&quot;: {
            &quot;type&quot;: &quot;range&quot;, 
            &quot;low&quot;: 0.0, 
            &quot;high&quot;: 100.0
        },
    }
})
</code></pre>
<p>This type of query returns a list of dictionaries, where each dictionary
corresponds to the features for a particular user.</p>
<h3 id="machine-learning-queries">Machine Learning Queries</h3>
<p>Machine learning queries take the below form where the featurizer is a SQL
script that returns a single row (e.g. a dictionaries). In addition, machine
learning queries specify an aggregator which corresponds to a specific model.</p>
<p>For example, consider a simple Gaussian Naive Bayes query where the inputs and
outputs are <code>[x1, x2]</code> and <code>y</code> respectively.</p>
<pre><code>query_id = api.create_query(&quot;http://&lt;server_ip&gt;:3000/&quot;, {
    &quot;type&quot;: &quot;federated_learning&quot;,
    &quot;epsilon&quot;: 10.0,
    &quot;featurizer&quot;: &quot;SELECT x1, x2, y FROM example_app.tableA&quot;,
    &quot;aggregator&quot;: {
        &quot;model&quot;: &quot;GaussianNB&quot;,
        &quot;inputs&quot;: [&quot;x0&quot;, &quot;x1&quot;],
        &quot;output&quot;: &quot;y&quot;,
        &quot;bounds&quot;: [(0.0, 1.0), (0.0, 1.0)]
    }
})
</code></pre>
<p>Note that the model specification is provided in the aggregator field and that
we specify the bound for each input variable.</p>
<p>Here's another example of a logistic regression query where the inputs and
outputs are <code>[x1, x2]</code> and <code>y</code> respectively.</p>
<pre><code>query_id = api.create_query(&quot;http://&lt;server_ip&gt;:3000/&quot;, {
    &quot;type&quot;: &quot;federated_learning&quot;,
    &quot;epsilon&quot;: 10.0,
    &quot;featurizer&quot;: &quot;SELECT x1, x2, y FROM example_app.tableA&quot;,
    &quot;aggregator&quot;: {
        &quot;model&quot;: &quot;LogisticRegression&quot;,
        &quot;inputs&quot;: [&quot;x0&quot;, &quot;x1&quot;],
        &quot;output&quot;: &quot;y&quot;,
        &quot;data_norm&quot;: 2.0
    }
})
</code></pre>
<p>Note that in this case, while we don't need to specify bounds, we do need to
specify the maximum norm of any particular row in the data.</p>
<h3 id="federated-learning-queries">Federated Learning Queries</h3>
<p>Federated learning queries take the below form where the featurizer is a SQL
script that returns a list of rows (e.g. a list of dictionaries). In addition,
federated learning queries specify an aggregator which corresponds to a deep
learning model.</p>
<p>For example, consider a simple linear regression query where the inputs and
outputs are <code>[x1, x2]</code> and <code>y</code> respectively.</p>
<pre><code>query_id = api.create_query(&quot;http://&lt;server_ip&gt;:3000/&quot;, {
    &quot;type&quot;: &quot;federated_learning&quot;,
    &quot;epsilon&quot;: 10.0,
    &quot;featurizer&quot;: &quot;SELECT x1, x2, y FROM example_app.tableA&quot;,
    &quot;aggregator&quot;: {
        &quot;lr&quot;: 1e-4,
        &quot;loss&quot;: &quot;MSE&quot;,
        &quot;model&quot;: &quot;Linear&quot;,
        &quot;inputs&quot;: [&quot;x1&quot;, &quot;x2&quot;],
        &quot;outputs&quot;: [&quot;y&quot;],
    }
})
</code></pre>
<p>We can easily switch to a slightly more complex model with multiple hidden
layers (e.g. a feedforward neural network with two hidden layers and ReLU
activation functions) by slightly modifying our query.</p>
<pre><code>query_id = api.create_query(&quot;http://&lt;server_ip&gt;:3000/&quot;, {
    &quot;type&quot;: &quot;federated_learning&quot;,
    &quot;epsilon&quot;: 10.0,
    &quot;featurizer&quot;: &quot;SELECT x1, x2, y FROM example_app.tableA&quot;,
    &quot;aggregator&quot;: {
        &quot;lr&quot;: 1e-4,
        &quot;loss&quot;: &quot;MSE&quot;,
        &quot;model&quot;: &quot;MultilayerPerceptron&quot;,
        &quot;shape&quot;: [10, 10],
        &quot;activation&quot;: &quot;ReLU&quot;,
        &quot;inputs&quot;: [&quot;x0&quot;, &quot;x1&quot;],
        &quot;outputs&quot;: [&quot;y&quot;],
    }
})
</code></pre>
<p>The federated learning framework is also theoretically capable of supporting
more complex types of models such as recurrent neural networks for natural
language processing and convolutional neural networks for computer vision; we
will implement support for these additional features in the near future.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;
.. include:: ../README.md
&#34;&#34;&#34;</code></pre>
</details>
</section>
<section>
<h2 class="section-title" id="header-submodules">Sub-modules</h2>
<dl>
<dt><code class="name"><a title="tiresias.benchmark" href="benchmark/index.html">tiresias.benchmark</a></code></dt>
<dd>
<section class="desc"><p>The <a title="tiresias.benchmark" href="benchmark/index.html"><code>tiresias.benchmark</code></a> module provides an integrated framework for measuring
the performance of the different differential privacy mechanisms â€¦</p></section>
</dd>
<dt><code class="name"><a title="tiresias.client" href="client/index.html">tiresias.client</a></code></dt>
<dd>
<section class="desc"><p>The <a title="tiresias.client" href="client/index.html"><code>tiresias.client</code></a> module is responsible for (1) providing a local personal
data store and (2) performing computations necessary for differential â€¦</p></section>
</dd>
<dt><code class="name"><a title="tiresias.core" href="core/index.html">tiresias.core</a></code></dt>
<dd>
<section class="desc"><p>The <a title="tiresias.core" href="core/index.html"><code>tiresias.core</code></a> module is responsible for providing the underlying
implementations of various differential privacy mechanisms and machine
â€¦</p></section>
</dd>
<dt><code class="name"><a title="tiresias.server" href="server/index.html">tiresias.server</a></code></dt>
<dd>
<section class="desc"><p>The <a title="tiresias.server" href="server/index.html"><code>tiresias.server</code></a> module is responsible for providing a lightweight REST
API for creating queries and submitting data to queries. In addition, the â€¦</p></section>
</dd>
<dt><code class="name"><a title="tiresias.worker" href="worker/index.html">tiresias.worker</a></code></dt>
<dd>
<section class="desc"><p>The <a title="tiresias.worker" href="worker/index.html"><code>tiresias.worker</code></a> module is responsible for providing the server-side
computations needed to handle a query. This module is currently tightly
â€¦</p></section>
</dd>
</dl>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul>
<li><a href="#usage">Usage</a><ul>
<li><a href="#data-collection">Data Collection</a></li>
<li><a href="#example-query">Example Query</a></li>
</ul>
</li>
<li><a href="#queries-and-mechanisms">Queries and Mechanisms</a><ul>
<li><a href="#basic-queries">Basic Queries</a></li>
<li><a href="#bounded-queries">Bounded Queries</a></li>
<li><a href="#machine-learning-queries">Machine Learning Queries</a></li>
<li><a href="#federated-learning-queries">Federated Learning Queries</a></li>
</ul>
</li>
</ul>
</div>
<ul id="index">
<li><h3><a href="#header-submodules">Sub-modules</a></h3>
<ul>
<li><code><a title="tiresias.benchmark" href="benchmark/index.html">tiresias.benchmark</a></code></li>
<li><code><a title="tiresias.client" href="client/index.html">tiresias.client</a></code></li>
<li><code><a title="tiresias.core" href="core/index.html">tiresias.core</a></code></li>
<li><code><a title="tiresias.server" href="server/index.html">tiresias.server</a></code></li>
<li><code><a title="tiresias.worker" href="worker/index.html">tiresias.worker</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.7.1</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>